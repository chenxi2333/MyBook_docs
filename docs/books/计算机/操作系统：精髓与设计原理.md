# 操作系统：精髓与设计原理

## 什么是操作系统？

### 历史节点

从简单到复杂，从一个人到多个人的访问，从一个程序到多个程序；

程序之间开始需要写作，程序不再直接访问IO，而是储存在“文件”。



* 1950s——多个程序（使用者）共享一台计算机的需求：有了**操作任务系统（operate jobs system）**
  * 所谓“批处理系统”：可以同时处理多个任务
  * 同时，诞生了 **设备、文件、任务**等概念
* 1960s——集成电路、总线的出现：完善的中断、异常，内存足够容纳多个程序同时存在
  * 分时运行程序，不断切换运行的程序（通过IO切换）
  * 而这个”管理“程序在内存上跑的系统，就是操作系统的雏形
    * 操作系统需要：保证各个程序之间实现隔离互不影响，并保证程序之间互相能切换
    * 诞生了：进程的概念、相关API（装载、去除进程）
  * 中断的加入：时钟中断让进程之间能够定时切换，或者让操作系统决定切换（开始或者结束一个程序）。
  * 虚拟内存
* 1970s——CISC指令集，PC，超级计算机诞生，高级编程语言，UNIX诞生

### 回到开头的问题：什么是操作系统？

* 操作系统是”运行多个程序“这个需求的解决方案。

  它（需求）随着计算机性能的增长自然出现。

* 它需要考虑的问题——如何复用硬件资源，让每个程序都看起来在独占计算机
* 它应该提供什么样的API来保障各类型的程序都能够实现

## 应用眼中的操作系统

### 什么是应用程序

1. 文件都是一个储存在磁盘上的“字节序列”（即ELF文件），操作系统提供对文件统一的API可以用来操作（打开、读取、改写）所有的“文件”（需要相应的权限）。
   1. ELF文件的Header：内容的分布、指令集体系结构、入口地址；
   2. program headers：决定ELF应该如何被加载器加载。
2. 进程的概念：进程的创建和销毁、切换的代价很快，但是可以使用在多机分布式系统。
   * 稳定安全选择进程，需要速度选择线程
   * 